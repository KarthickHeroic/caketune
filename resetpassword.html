<html lang="en" >
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Angular Material style sheet -->
  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.0/angular-material.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="style/screen.css">
</head>
<body ng-app="BlankApp" ng-cloak id="login" ng-controller="myCtrl">
 
    <div layout="column" layout-align="center center" class="height100 ">
        <div layout="column" id="maincontainer" layout-align="center center">
              <div class="logo">
                <img src="images/logo.png" alt="" />
              </div>
             <p> Enter your registered e-mail address and we'll send <br/>you a link to reset your password.</p>

              <md-whiteframe class="md-whiteframe-3dp" layout-align="center center">
                <div class="emailverifyview" >                
                  <div class="viewform">
                    <md-input-container class="md-block">
                      <label>Email</label>
                      <input ng-model="email">
                    </md-input-container>
                                   
                    <div layout="row" layout-align="end center">
                    <!-- <md-button class="md-raised md-primary nomargin" ng-href="dashboard.html" >Register</md-button> -->
                    <md-button class="md-raised md-primary nomargin" ng-click="myFunc()">Reset</md-button>
                    </div>
                  </div>
                </div>
              </md-whiteframe>   
                <div class="signtxt ptop-10">
                 Not a registered user yet?
                  <a href="signup.html">Sign up now!</a>
                </div>
        </div>
               <div id="success">
                    Reset link was send.
                  <h3>Please check your email.</h3>    
                <p>Click to <a href="login.html">login</a> here!</p>
              </div>
    </div>
  
  <!-- Angular Material requires Angular.js Libraries -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-animate.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-aria.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-messages.min.js"></script>
  <!-- Angular Material Library -->
  <script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.0/angular-material.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.11.0/firebase.js"></script>
     <script src="js/firebaseInit.js"></script> 
<!-- 
<script src="js/module.js"></script>  
<script src="js/service.js"></script>
-->
  

    
    <script type="text/javascript">

 var success = document.getElementById("success");
                 var maincontainer = document.getElementById("maincontainer");
                success.style.display = "none";
        var pagelogin = document.getElementById("login");
 
    var app = angular.module('BlankApp', ['ngMaterial']);
 app.controller('myCtrl', function($scope) {
   $scope.myFunc = function() {
     var fbemail = $scope.email;
     var usersdb = firebase.database().ref("/Users/");
     firebase.auth().sendPasswordResetEmail(fbemail).then(function() {
          pagelogin.classList.add("loginbackground");
        maincontainer.style.display = "none"; 
                success.style.display = "block"; 
         
}).catch(function(error) {
  // An error happened.
          var errorCode = error.code;
              var errorMessage = error.message;
             alert(errorMessage);
     
          });
   }
 });
 
  </script>
  
</body>
</html>